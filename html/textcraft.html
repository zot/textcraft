<html>
    <!--
         Copyright (c) 2020, William R. Burdick Jr., Roy Riggs, and TEAM CTHLUHU

         The MIT License (MIT)

         Permission is hereby granted, free of charge, to any person obtaining a copy
         of this software and associated documentation files (the "Software"), to deal
         in the Software without restriction, including without limitation the rights
         to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
         copies of the Software, and to permit persons to whom the Software is
         furnished to do so, subject to the following conditions:

         The above copyright notice and this permission notice shall be included in
         all copies or substantial portions of the Software.

         THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
         IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
         FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
         AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
         LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
         OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
         THE SOFTWARE.
    -->
    <head>
        <link rel = "stylesheet" type = "text/css" href = "css/textcraft.css" />
        <script src="https://kit.fontawesome.com/02a1a974ac.js" crossorigin="anonymous"></script>
        <script src='js/textcraft.js' type='module'></script>
    </head>
    <body>
        <div id='indicators'>
            <button id='toggleStateButtons' title='Note, username must be filled in and nat state must be public or private for the gui to proceed'>Emulation</button>
            &nbsp;
            <div id='indicator-box'>
                <b>Mode:&nbsp;</b>
                <span class='when-not-role-relay mode-label'>
                    <span class='when-peer-disconnected'>disconnected</span>
                    <span class='when-peer-abortingrelayhosting'>abortingRelayHosting</span>
                    <span class='when-peer-abortingrelayconnection'>abortingRelayConnection</span>
                    <span class='when-peer-stoppinghosting'>stoppingHosting</span>
                    <span class='when-peer-disconnectingfromhost'>disconnectingFromHost</span>
                    <span class='when-peer-disconnectingfromrelayforhosting'>disconnectingFromRelayForHosting</span>
                    <span class='when-peer-disconnectingfromrelayforconnection'>disconnectingFromRelayForConnection</span>
                    <span class='when-peer-connectingtohost'>connectingToHost</span>
                    <span class='when-peer-connectingtorelayforhosting'>connectingToRelayForHosting</span>
                    <span class='when-peer-connectingtorelayforconnection'>connectingToRelayForConnection</span>
                    <span class='when-peer-connectingtorelayforcallback'>connectingToRelayForCallback</span>
                    <span class='when-peer-awaitingtokenconnection'>awaitingTokenConnection</span>
                    <span class='when-peer-awaitingtoken'>awaitingToken</span>
                    <span class='when-peer-connectedtohost'>connectedToHost</span>
                    <span class='when-peer-hostingdirectly'>hostingDirectly</span>
                    <span class='when-peer-connectedtorelayforhosting'>connectedToRelayForHosting</span>
                    <span class='when-peer-connectedtorelayforconnection'>connectedToRelayForConnection</span>
                </span>
                <span class='when-role-relay mode-label'>
                    <span class='when-relay-idle'>idleRelay</span>
                    <span class='when-relay-pendinghosting'>pendingRelay</span>
                    <span class='when-relay-hosting'>hostingRelay</span>
                </span>
                <span id='modeIndicator'></span>
                &nbsp;
                <b>
                    <span class='when-nat-known'>Online:</span>
                    <span class='when-nat-notknown'>Offline:</span>
                </b>
                &nbsp;
                <img class='when-nat-notstarted' id='onlineIndicator' src='images/Gray_Light_Icon.svg'>
                <span class='when-nat-unknown'><b>NEED SWIRLY LIGHT<i class="fas fa-arrow-right"></i></b><img class='when-nat-unknown' id='onlineIndicator' src='images/Gray_Light_Icon.svg'></span>
                <img class='when-nat-public' id='onlineIndicator' src='images/Green_Light_Icon.svg'>
                <span class='when-nat-private'><img class='when-nat-private' id='onlineIndicator' src='images/Orange_Light_Icon.svg'></span>
            </div>
        </div>
        <div id='stateButtons'>
            <div>
                <span>GUI SECTIONS:</span>
                <input type="radio" id="connectionSection" name="sectionSelection"> <label for="connectionSection">Connection</label>
                <input type="radio" id="mudSection" name="sectionSelection"> <label for="mudSection">MUD</label>
                <input type="radio" id="profileSection" name="sectionSelection"> <label for="profileSection">Profile</label>
                <input type="radio" id="storageSection" name="sectionSelection"> <label for="storageSection">Storage</label>
            </div>
            <div class='when-section-connection'>
                <span>EMULATE GATEWAY:</span>
                <input type="radio" id="notstartedNat" name="natSelection"> <label for="notstartedNat">Not Started</label>
                <input type="radio" id="unknownNat" name="natSelection"> <label for="unknownNat">Unknown Nat</label>
                <input type="radio" id="publicNat" name="natSelection"> <label for="publicNat">Public Nat</label>
                <input type="radio" id="privateNat" name="natSelection"> <label for="privateNat">Private Nat</label>
            </div>
            <div id='peerStates' class='when-section-connection'>
                <span>EMULATE PEER:</span>
                <input type='radio' id='disconnectedPeer' name='peerState'> <label for='disconnectedPeer'>disconnected</label>
                <input type='radio' id='abortingRelayHostingPeer' name='peerState'> <label for='abortingRelayHostingPeer'>abortingRelayHosting</label>
                <input type='radio' id='abortingRelayConnectionPeer' name='peerState'> <label for='abortingRelayConnectionPeer'>abortingRelayConnection</label>
                <input type='radio' id='stoppingHostingPeer' name='peerState'> <label for='stoppingHostingPeer'>stoppingHosting</label>
                <input type='radio' id='disconnectingFromHostPeer' name='peerState'> <label for='disconnectingFromHostPeer'>disconnectingFromHost</label>
                <input type='radio' id='disconnectingFromRelayForHostingPeer' name='peerState'> <label for='disconnectingFromRelayForHostingPeer'>disconnectingFromRelayForHosting</label>
                <input type='radio' id='disconnectingFromRelayForConnectionPeer' name='peerState'> <label for='disconnectingFromRelayForConnectionPeer'>disconnectingFromRelayForConnection</label>
                <input type='radio' id='connectingToHostPeer' name='peerState'> <label for='connectingToHostPeer'>connectingToHost</label>
                <input type='radio' id='connectingToRelayForHostingPeer' name='peerState'> <label for='connectingToRelayForHostingPeer'>connectingToRelayForHosting</label>
                <input type='radio' id='connectingToRelayForConnectionPeer' name='peerState'> <label for='connectingToRelayForConnectionPeer'>connectingToRelayForConnection</label>
                <input type='radio' id='connectingToRelayForCallbackPeer' name='peerState'> <label for='connectingToRelayForCallbackPeer'>connectingToRelayForCallback</label>
                <input type='radio' id='awaitingTokenConnectionPeer' name='peerState'> <label for='awaitingTokenConnectionPeer'>awaitingTokenConnection</label>
                <input type='radio' id='awaitingTokenPeer' name='peerState'> <label for='awaitingTokenPeer'>awaitingToken</label>
                <input type='radio' id='connectedToHostPeer' name='peerState'> <label for='connectedToHostPeer'>connectedToHost</label>
                <input type='radio' id='hostingDirectlyPeer' name='peerState'> <label for='hostingDirectlyPeer'>hostingDirectly</label>
                <input type='radio' id='connectedToRelayForHostingPeer' name='peerState'> <label for='connectedToRelayForHostingPeer'>connectedToRelayForHosting</label>
                <input type='radio' id='connectedToRelayForConnectionPeer' name='peerState'> <label for='connectedToRelayForConnectionPeer'>connectedToRelayForConnection</label>
            </div>
            <div class='when-section-connection'>
                <span>EMULATE RELAY:</span>
                <input type="radio" id="idleRelay" name="relaySelection"> <label for="idleRelay">Disconnected</label>
                <input type="radio" id="pendingHostingRelay" name="relaySelection"> <label for="pendingHostingRelay">Waiting for host</label>
                <input type="radio" id="hostingRelay" name="relaySelection"> <label for="hostingRelay">Connected to host</label>
            </div>
        </div>
		<div id='logo'>
            <span id='gui-mode'></span>
            <span class='fgrow'></span>
            <img src="images/textcraft.png">
            <span class='fgrow'></span>
            <div>
                <input type="radio" id="storageSection" name="sectionSelection"> <label for="storageSection">Storage</label>
                <input type="radio" id="connectionSection" name="sectionSelection"> <label for="connectionSection">Connection</label>
                <input type="radio" id="mudSection" name="sectionSelection"> <label for="mudSection">MUD</label>
                <input type="radio" id="profileSection" name="sectionSelection"> <label for="profileSection">Profile</label>
                &nbsp;
            </div>
        </div>
        <div id='sections'>
        <div class='when-section-connection section'>
            <div id='login' class='when-not-connected-with-user'>
                <div id='userDiv' class='field'>Username:&nbsp;<input id='user' type='text'></div>
                <div>NAT Status: <span id='natStatus'></span> </div>
                <div>Peer ID: <span id='peerID' type='text'></span></div>
            </div>
            <div class='when-connected-with-user'>
                <div id='panelSelector'>
                    <input type="radio" id="guestRole" name="panelSelector"> <label for="guestRole">Join a session</label>
                    <input type="radio" id="hostRole" name="panelSelector"> <label for="hostRole">Host a session</label>
                    <span class='when-public'>
                        <input type="radio" id="relayRole" name="panelSelector"> <label for="relayRole">Relay for a private peer</label>
                    </span>
                </div>
                <div id='connectDiv' class='when-role-guest'>
                    <hr>
                    <div class='field'>
                        <button id='connect'>Connect</button>
                        &nbsp;
                        <span id='connectStatus'></span>
                        <input id='toHostID' type='text'>
                    </div>
                </div>
                <div id='hostDiv' class='when-role-host'>
                    <hr>
                    <h1 class='when-host'>Give your connect string to people you want to invite</h1>
                    <div class='field'>
                        <button id='host'>Host</button>
                        &nbsp;
                        <span class='when-private when-peer-disconnected'>Relay connect string:&nbsp;</span>
                        <input class='when-private when-peer-disconnected' id='hostingRelay' type='text' placeholder='You must use a relay because your connection is private'>
                        <span class='when-private when-not-peer-disconnected'>Your Connect string:&nbsp;</span>
                        <input class='when-private when-not-peer-disconnected' id='connectString' type='text' readonly='true'>
                    </div>
                    <h1 class='when-private'>
                        Your peer does not have public access so you must use a relay
                        <ol>
                            <li>Copy your peer ID and send it to someone who will relay for you</li>
                            <li>Once they relay, they will send you the relay connect string</li>
                            <li>Paste the relay connect string above and click Host</li>
                        </ol>
                    </h1>
                </div>
                <div id='relayPanel' class='when-role-relay'>
                    <hr>
                    <h1 class='when-not-relay-idle'>Give your relay connect string to the private peer's owner</h1>
                    <div id='relayHosting'>
                        <div class='field'>
                            <button id='relayForHost'>Relay</button>
                            <span class='when-relay-idle'>&nbsp;Host Peer:&nbsp;</span>
                            <input id='relayRequestHost' type='text' class='when-relay-idle' placeholder="'Paste the session host's peer ID here">
                            <span class='when-not-relay-idle'>&nbsp;Relay connect string:&nbsp;</span>
                            <input class='when-not-relay-idle' id='relayConnectString' type='text' readonly='true'>
                        </div>
                    </div>
                    <h1 class='when-public when-relay-idle'>
                        <ol>
                            <li>Paste the private peer's id above</li>
                            <li>Click Relay</li>
                            <li>Copy the relay connect string and send it to the private peer's owner</li>
                        </ol>
                    </h1>
                </div>
            </div>
        </div>
        <div class='when-section-mud section'>
            <div id='mudView' class='view'>
                <div id='mud-output'></div>
                <input id='mud-command' type='text'>
            </div>
        </div>
        <div class='when-section-profile section'>
            <div id='profileView' class='view'>
                PROFILE
                <div class='field'><span>Name:&nbsp;</span><input id='profileName'></div>
            </div>
        </div>
        <div class='when-section-storage section'>
            <div id='storageView' class='view'>
                <div class='fcenter'>Your MUDS&nbsp;<button id='add-mud-button'><i class="fas fa-plus"></i></button><button class='when-peer-connectedtohost'>Request download of current MUD</button></div>
                <div id='storage-list'></div>
            </div>
        </div>
        <div id='templates'>
            <div id='mud-item-template' class='mud-view'>
                <i class="fas fa-fist-raised"></i>&nbsp;<span name='name'></span>&nbsp;<button name='activate-mud'>Activate</button>&nbsp;<button name='delete-mud' class='naked-button'><i class="fas fa-window-close"></i></button>
            </div>
            <div id='mud-editor-template' class='dialog fcolumn'>
                <div class='field'>World name:&nbsp;<input type='text' name='mud-name'></span></div>
                <div>Users <button name='mud-add-user'><i class="fas fa-plus"></i></button></div>
                <div class='fcolumn fgrow' name='mud-user-list'>
                    
                </div>
                <div><button name='save' class='left'>Save</button><button name='cancel' class='right'>Cancel</button></div>
            </div>
            <div id='mud-user-item' class='field mud-view'>
                Name:&nbsp;
                <input name='mud-user-name'>
                &nbsp;Password:&nbsp;
                <input name='mud-user-password'>
                &nbsp;
                <button name='delete-user' class='naked-button'><i class="fas fa-window-close"></i></button>
            </div>
        </div>
        </div>
        <div id='parsing'></div>
        </div>
    </body>
</html>
